<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Escribir en libertad</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/extra.css">
    <link rel="stylesheet" href="dist/escribe.css" id="theme">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
	<section><h1>Escribir en libertad</h1>
	  <h2>Sofware, cultura libre, git, GitHub y la nueva literatura.</h2>
	  <h3><code>@jjmerelo</code> para <a href='https://www.meetup.com/es-ES/GDGWonderCoders/'>GDG WonderCoders, Ciudad de M√©xico.</a></h3>
	</section>

	<section data-background='https://live.staticflickr.com/65535/50224981307_09b07bbacd_k_d.jpg'>><h1>¬øC√≥mo se escribe?</h1>
	  <blockquote class='fragment'>Se trabaja con imaginaci√≥n, intuici√≥n y una verdad aparente</blockquote>
	  <h3 class='fragment'>Juan Rulfo</h3>
	  <aside class='notes'>Tomado de http://www.eraseunavezqueseera.com/2019/09/04/frases-escritores-sobre-escribir/</aside>
	</section>

	<section><h1>La verdad tiene que salir fuera</h1>
	  <h2 class='fragment'>Escribir es como <em>rascarse una comez√≥n</em></h2>
	  <h1 class='fragment'>Igual que el software libre</h1>
	</section>

	<section>
	  <blockquote>No existe la libertad, sino la b√∫squeda de la libertad, y esa b√∫squeda es la que nos hace libres.</blockquote>
	  
	  <h3>Carlos Fuentes</h3>
	  <aside class='notes'>Cita <a href='https://proverbia.net/autor/frases-de-carlos-fuentes'>de aqu√≠</a></aside>
	</section>

	<section>
	  <section><h1>Vamos a escribir en libertad</h1></section>

	  <section><h1>La mejor</h1>
	    <h2 class='fragment'>posiblemente la √∫nica</h2>
	    <h1>forma de hacerlo</h1>
	  </section>
	</section>

	<!-- licencias -->
	<section>
	  <section><h1>La libertad se da mediante licencias.</h1>
	    <img src='https://upload.wikimedia.org/wikipedia/commons/2/2f/CC_BY-SA_3.0.png' alt='cc-by-sa'>
	    <aside class='notes'>Tomada de la wikipedia, es una licencia de cultura libre: sigue afirmando la autor√≠a, pero adem√°s hace viral cualquier uso. La cultura libre ha existido durante mucho tiempo tanto en la literatura, como en la m√∫sica; √∫ltimamente en la creaci√≥n 3D. Desde tu libertad, contribuyes a la libertad de los dem√°s; pueden usar tu obra como quieran, ponerle m√∫sica, hacer una obra de teatro, lo que les d√© la gana. Usar las fotos, lo que sea. Una obra CC puedes venderla, pero tienes que hacerlo sin restricci√≥n de derechos (DRM). Adem√°s, no cedes los derechos, por lo que entre otras cosas, conserva tu propia libertad.</aside>
	  </section>

	  <section data-background='https://live.staticflickr.com/65535/50225013087_2f95892e60_o_d.jpg'><h1 class='fragment'>‚úì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1>
	    <h2>Primera novela con licencia libre en castellano</h2>
	    <aside class='notes'>Liberada en <a href='https://elpais.com/diario/2003/10/09/ciberpais/1065663623_850215.amp.html'>2003</a>, inicialmente ten√≠a licencia GFDL, posteriormente una licencia CC-by-sa. Todav√≠a se vende (poco) por Amazon, en una edici√≥n posterior. Lo cierto es que como experiencia estuvo bien, se escribe para que te lean, y se ley√≥, rese√±√≥ en diferentes sitios, y copi√≥; una persona me envi√≥ quince p√°ginas de correcciones. Pero esto es poco pr√°ctico, y no invita una colaboraci√≥n espont√°nea. Hay qu eir un poco m√°s all√°. Tambi√©n, por ejemplo, apareci√≥ en el primer lector de tinta electr√≥nica que se comercializ√≥ en Espa√±a, el Papyre (al parecer, tambi√©n se comercializ√≥ en <a href='http://shmconsultingmx.blogspot.com/2011/06/llega-la-mexico-papyre-el-primer.html'>2011 en M√©xico</a>), junto con una serie de obras de contenido libre, muchas sacadas de Proyecto Gutenberg o Cervantes Digital, llamada "Biblioteca Grammata Libre".</aside>
	  </section>
	  
	  <section>
	    <h1>Un paso m√°s all√°: fuentes abiertas</h1>
	    <aside class='notes'>Lo que implica que el fichero original de texto que se use para generar el definitivo debe estar disponible tambi√©n para que lo copien. ¬øY d√≥nde es m√°s f√°cil hacerlo?</aside>
	  </section>
	</section>

	<section>
	  <section><h2>Software libre:</h2>
	    <h1 class='fragment'>¬øProceso o producto?</h1>
	    <aside class='notes'>Antes... una peque√±a desviaci√≥n.</aside>
	  </section>

	  <section><h1>Comer y rascar...</h1>
	    <h2 class='fragment'>y desarrollar software libre</h2>
	    <h3 class='fragment'>y escribir.</h3>
	    <h1>... todo es empezar </h1>
	  </section>

	  <section><h1>... Un proceso</h1>
	    <h2 class='fragment'>de mejora continua y aprendizaje en comunidad</h2>

	    <aside class='notes'>Por eso el concepto de "liberar" un software una vez que se ha "terminado" no encaja con el concepto de software libre: se nace libre, se mantiene libre, sigue siendo libre, sacando nuevas versiones cuando haya alg√∫n cambio significativo. Pero si el software libre es un proceso, ¬øqu√© pasa con la literatura?</aside>
	  </section>

	</section>
	
	<!-- Escritura como proceso -->
	<section>

	  <section><blockquote>Hay que aprender a tachar</blockquote>
	    <h2>Juan Rulfo, sobre el proceso "perfectamente inexplicable" de escribir.</h2>

	    <aside class='notes'>Sacado de <a href='https://www.milenio.com/cultura/la-clave-esta-en-la-velocidad'>Milenio.com</a>, entre otros sitios. Escribir en libertad, igual que el software libre, es un proceso. </aside>
	  </section>

	  <section><h1>Donald M. Murray: la escritura se debe ense√±ar como <strong>proceso</strong>, no producto.</h1>
	    <aside class='notes'>Del <a href='https://en.wikipedia.org/wiki/Writing_process'>art√≠culo de la wikipedia sobre el proceso de escritura.</a></aside>
	  </section>

	  <section><h1>Preescritura, escritura y re-escritura</h1>
	    <h2 class='notes'>O tachado...</h2>
	    <aside class='notes'>Estas son las tres fases que no se describen como lineales, sino que son simult√°neas y repetidas m√∫ltiples veces: en un proceso que no tiene por qu√© terminar.</aside>
	  </section>

	  <section><h1>M√°s f√°cil con un sistema de control de fuentes.</h1>
	  </section>
	</section>

	<!-- Pre-escritura -->
	<section>

	  <section><blockquote>Escribir es un oficio. [La inspiraci√≥n] se volatiliza instant√°neamente si no se la trabaja</blockquote>
	    <h2>Ang√©lica Gorodischer</h2>
	    <aside class='notes'>Ang√©lica Gorodischer es una escritora argentina, y posiblemente una de las escritoras en espa√±ol de ese g√©nero m√°s importantes. Hasta el punto que la tradujo Ursula K. LeGuin</aside>
	  </section>
	  
	  <section><h1>Pre-escribir: Abre repo GitHub/GitLab</h1>
	    <h2>Un libro debe nacer libre</h2>
	    <aside class='notes'>GitHub pertenece a Microsoft, y el software que usa no es libre. GitLab pertenece a otra empresa privada, y libera el software usado en el sitio. GitHub es mucho m√°s popular, y es donde tiene cuenta casi todo el mundo. As√≠ que elige el que quieras; desde el punto de vista del uso ninguno es mejor ni peor, son muy similares.</aside>
	  </section>

	  <section><h1>Una vez creado...</h1>

	    <pre><code>git clone mi-repo/mi-novela</code></pre>
	  </section>

	  <section><h1>Usa Markdown para escribir</h1>
	    <h2>Y un simple editor de texto</h2>
	    <pre><code># TODO

* [x] Encontrar la voz.
* [ ] *Backstory* del personaje principal

## Investigaci√≥n

* [ ] Estudiar historia del Congo en los a√±os 50.</code></pre>
	    <aside class='notes'>GitHub y GitLab incluyen un editor de texto. En realidad, pr√°cticamente todo lo necesario se puede hacer directamente en la web. </aside>
	  </section>

	  <section><img src='img/todo-md.png' alt='TODO renderizado' />
	    <aside class='notes'>El markdown se procesa autom√°ticamente en GitHub o se puede convertir usando herramientas como MarkDown. Pero ya estamos escribiendo algo, aunque sea auxiliar, as√≠ que vamos a pasar a la fase siguiente, o vamos a hacerla a la vez.</aside>
	  </section>
	</section>

	<!-- Escribir -->
	<section>
	  <section><h1>Escribamos</h1>
	      <img src='img/comenzando.png' alt='comenzando a editar'>
	  </section>

	  <section><h1>Registremos lo escrito</h1>

	    <pre><code>git add texto.md
git commit -m "Un comienzo tan bueno como cualquiera"</code></pre>
	    <aside class='notes'>Guando "guardamos" el fichero en la web hicimos la misma operaci√≥n. Ahora lo importante es que git nos permite a√±adir datos adicionales a todo lo que escribimos.</aside>
	  </section>

	  <section><h1>¬øQu√© hay en un mensaje de <em>commit</em>?</h1>
	    <h2 class='fragment'>Diario de escritura.</h2>
	    <h2 class='fragment'>Documentaci√≥n de lo escrito.</h2>
	    <h2 class='fragment'>... Otra novela-espejo</h2>
	  </section>

	  <section><h1>En "Manny..."</h1>
	    <img src='img/blame.png' alt='A√±ade documentaci√≥n'>
	  </section>

	  <section><h1><code>.gitconfig</code> imprescindible</h1>
<pre><code>[user]
        name = JJ Merelo
        email = jjmerelo@gmail.com
[alias]
        ci = commit
        st = status -sb
        ca = commit -am
[core]
        editor = emacs
[color]
        ui = true</code></pre>
<aside class='notes'>Editando el fichero o usando <code>git config</code>. Aparte de las abreviaturas que te sirven para hacer las cosas m√°s r√°pidamente, lo importante es que definas un editor para los mensajes de commit; ya que lo haces, elige el mejor editor del mundo.</aside>
	  </section>
	  
<section><h1>Mensajes 50 + 80 + Markdown</h1>
  <pre><code>git commit -a # Salta tu editor configurado</code></pre>
</section>

<section><h1>O usa <em>git hooks</em></h1>
  <pre><code>lines = File.open(ARGV[0],'r').readlines
abort "La primera l√≠nea tiene m√°s de 50 caracteres" if lines.shift.size > 50
abort "La segunda l√≠nea debe estar vac√≠a" if lines.size > 0 and lines.shift.chop != ''
if lines.size > 0
  bad_lines = {}
  lines.each_with_index do |line,i|
    bad_lines[i+2] = line if line.size > 80
  end
  if bad_lines.keys.size > 0
    puts "Todas estas l√≠neas tienen m√°s de 80 caracteres", bad_lines.keys.join(", ")
    exit 255
  end
end</code></pre>
  <aside class='notes'>Se copia a <code>.git/hooks/commit_msg</code>; este script se ejecutar√° justo antes de crear el commit y no lo permitir√° si no se cumplen las reglas. Pero no es el √∫nico que se puede pensar para controlar el proceso de escritura; en realidad no hay l√≠mites en lo que se puede testear (y aceptar o rechazar). La clave del script es que salga con un c√≥digo de error correcto (0) si el commit est√° bien, cualquier otro c√≥digo si no. Eso se consigue con la orden <code>abort</code> de Ruby.</aside>
</section>


<section data-background='img/commit.png' alt='escribiendo el mensaje de commit'>
  <aside class='notes'>Se puede abreviar tambi√©n <code>commit -a</code> a cualquier otra cosa, como <code>coa</code> para que sea m√°s corto. Es importante, en todo caso, una cierta disciplina en los mensajes de commit, para que realmente sean √∫tiles al proceso de escritura, y ayuden al editor (si lo hay) o simplemente a ti mismo.</aside>
	</section>
	</section>

	<!-- reescritura -->
	<section>
	  <section>
	    <blockquote>La √∫nica clase de escritura es la reescritura</blockquote>
	    <h2>Ernest Hemingway</h2>
	    <blockquote>La buena escritura es reescritura</blockquote>
	    <h2>Truman Capote</h2>
	    <aside class='notes'>Carlos Ruiz Zaf√≥n dec√≠a: se escribe para uno mismo, se reescribe para los dem√°s. Y es posible que sea as√≠, pero lo cierto es que corregir, tachar como dec√≠a Juan Rulfo, es esencial al proceso de escritura, recordemos el "Hay que aprender a tachar" del mismo Juan.</aside>
	  </section>

	  <section><h2>‚òù encontrar errores ortogr√°ficos.</h2>
	    <h1 class='fragment'>Usando tests unitarios e integraci√≥n continua.</h1>
	    <aside class='notes'>Test unitarios son tests usados para funciones espec√≠ficas de un programa. Integraci√≥n continua permite, en este caso, a√±adir al texto cualquier fragmento nuevo. En el proceso de escritura, escritura y reescritura son simult√°neos. Una herramienta de integraci√≥n continua te permite ejecutar tests unitarios cada vez que "integras" (a√±ades un commit) a tu novela.</aside>
	  </section>

	  <section><h2>Integraci√≥n continua f√°cil: <code>.travis.yml</code></h2>
	   <pre><code data-line-numbers="1,3|5-7|11">language: perl
perl:
  - "5.16"
before_install:
  - sudo apt-get install libhunspell-1.3-0 libhunspell-dev
  - curl https://raw.githubusercontent.com/JJ/Test-Text/master/data/Spanish.aff -o Spanish.aff
  - curl https://raw.githubusercontent.com/SublimeText/Dictionaries/master/Spanish.dic -o Spanish.dic
install: cpanm Test::Text TAP::Harness
script: perl -MTAP::Harness -e 'use utf8;\
my $harness = TAP::Harness->new( { verbosity => 0} );\
die "FAIL" if $harness->runtests( "just_check.t" )->failed;'</pre></code>

	    <aside class='notes'> Esto es un fichero en YAML, que es un lenguaje bastante com√∫n en este tipo de cosas. Como regla r√°pida: los dos puntos separan clave de valor, los guiones indican diferentes elementos en un array. ¬øQue por qu√© uso Perl? De hecho, comenc√© a usar Travis en una novela que us√©, precisamente, para aprender c√≥mo iban los mecanismos de integraci√≥n continua y dem√°s. Eleg√≠ Travis porque ten√≠a soporte para 
	      Puede parecer complicado, pero en realidad es simplemente darte de alta en Travis, copia y pega. Lo √∫nico que hay que cambiar es el idioma, e ir editando el diccionario personal cada vez que haya una palabra que no encuentre. Al final, esto tiene (cierta) complicaci√≥n una sola vez; las siguientes es simplemente crear el repo e ir copiando ficheros, como el siguiente (al que se llama).</aside>
	  </section>

	  <section><h1>Comprueba y ya est√°.</h1>
	    <pre><code data-line-numbers="1|2|3">use Test::Text;
for my $dir (qw(. pois) ) {
  my $tesxt = Test::Text->new($dir, ".", "Spanish", @_);
  $tesxt->check();
}
done_testing;
	    </code></pre>
	    <aside class='notes'>¬øRecord√°is la novela "Manny, the Magnificent Mechanical Man", que he mencionado anteriormente? Para que fuera f√°cil trabajar con ella, cre√© este m√≥dulo en Perl, que "limpia" Markdown (elimina c√≥digo, por ejemplo) y le pasa el corrector ortogr√°fico, indic√°ndote las palabras que no conoce. Te permite tener un diccionario espec√≠fico, usando por debajo un m√≥dulo que se llama <code>hunspell</code>. Parece complicado, pero en realidad es usar de forma extensiva las facilidades que te ofrece GitHub con sus "ganchos" a sistemas de integraci√≥n continua como Travis (o, √∫ltimamente, GitHub actions).</aside>
	  </section>

	  <section data-background='img/travis.png'><h1>Peque√±os traspi√©s...</h1>
	    <aside class='notes'>¬øEs mejor hacerlo en esta fase que hacer que el editor autom√°ticamente te marque las palabras que no conozca? S√≠, porque as√≠ escribes de forma m√°s fluida y conviertes la correcci√≥n en reescritura, reexaminando partes del texto que acabas de escribir (o no) y viendo si est√°n bien construidas, o encajadas, o c√≥mo encajan con el resto o con lo √∫ltimo que escribiste.</aside>
	  </section>
	</section>

	<!-- Pull requests -->
	<section>
	  <section><h1>Tests + CI: f√°cil colaboraci√≥n...</h1>
	    <h1 class='fragment'>mediante <em>pull requests</em></h1>
	  </section>

	  <section data-background='https://live.staticflickr.com/5099/5453759007_2aefe8c94e_k_d.jpg'><h2>PR en 3 pasos</h2>
	    <h2 class='fragment'>‚ë† Copia del repo</h2>
	    <h2 class='fragment'>‚ë° Modificaci√≥n</h2>
	    <h2 class='fragment'>‚ë¢ Solicitud de incorporaci√≥n</h2>
	  </section>

	  <section data-background='https://live.staticflickr.com/8251/8665197773_b31a25a027_o_d.jpg'>
	    <h1>La libertad invita a la colaboraci√≥n espont√°nea</h1>
	  </section>

	  <section><h1>En un PR puedes comentar</h1>
	    <h1 class='fragment'>Los tests dan tranquilidad.</h1>
	    <aside class='notes'>Por ejemplo, veo que se podr√≠a hacer "programaci√≥n defensiva" protegiendo, por ejemplo, algunas frases o palabras que uno no quiera que se cambie mediante los tests. Los tests son una especificaci√≥n funcional de lo que cumple los requisitos y lo que no. No hay l√≠mites en lo que puede considerarse una especificaci√≥n funcional en el caso de la literatura.</aside>
	  </section>

	  <section data-background='img/prs.png' alt='Pull requests en "manny"'>
	  </section>
	  
	</section>

	<section>
	  <section data-background='https://live.staticflickr.com/853/30092790268_ac1787742c_k_d.jpg'><h1>Por √∫ltimo</h1>
	    <h2 class='fragment fade-in-then-out'><strike>Desplegar a producci√≥n</strike></h2>
	  <h1 class='fragment'>Publicar</h1>
	</section>

	  <section data-background='https://live.staticflickr.com/8351/8403927805_6fafa085e5_o_d.jpg'><h1>No existe un API para publicar</h1>
	    <aside class='notes'>Pero se pueden hacer algunos tests conocidos.</aside>
	  </section>

	  <section><pre><code data-line-numbers="7|10"># Flag codeblocks with length bigger than a particular number
use Text::Markdown;
sub MAIN( $dir = "txt/", $length = 60 ) {
    for $dir.IO.dir(:test(/ ".md" $/)) -> $f {
	my @items =  Text::Markdown::Document.new($f.slurp()).items;
	say ( @items 
	      ==> grep( { $^√æ ~~ Text::Markdown::CodeBlock } )
	      ==> map( { .text.split("\n") } )
	      ==> flat()
	      ==> grep( { .chars > $length }  )
	      ==> map( { "‚Ä£$f ‚Üí $^√æ\n ‚§∑ is "~ $^√æ.chars ~" characters long" } )
	      ==> join( "\n" xx 2 ) );	
    }
}</code></pre>

	    <aside class='notes'>Por ejemplo, Amazon requiere que no haya ninguna l√≠nea con m√°s de n caracteres: hay que comprobar que el c√≥digo, que se representa literalmente, cumple esa condici√≥n. Si no, Amazon te rechazar√° el manuscrito, y es algo que se puede hacer s√≥lo a trav√©s de un formulario sin API posible; esto ahorra bastante trabajo. Esto est√° escrito en Raku, mi lenguaje favorito, hecho originalmente para un manual... de Raku, que entonces se llamaba perl 6. </aside>
	  </section>

	  <section><h2>üß∞ Extraer/acortar URLs, generar formatos finales...</h2 >
	    <pre><code data-line-numbers="2|7">utils/expande-URLs.py 
pandoc --template="$PWD"/utils/plantilla.latex \
    -V lang=es-ES \
    -V author='JJ Merelo' -V title='Playa Granada: Arquitectura e Historia'\
    -V documentclass=book\
    -S --latex-engine=xelatex \
    -o playa-granada-kdp.pdf \
    intro-links.md  pois/pueblo-del-chirimoyo-links.md\
    (...) pois/iglesia-josefina-bakhita-links.md --toc
		rm *-links.md pois/*-links.md</code></pre>
	    <aside class='notes'>Una vez m√°s, es un shell script que parece m√°s dif√≠cil de lo que es... Con uno similar se genera ePub, tambi√©n. Pero una vez que se ha hecho una vez, ya es simplemente copiar y cambiar nombres de fichero.</aside>
	  </section>
	</section>
	
	<section> <!-- concluyendo -->
	  <section><blockquote>Un libro no se termina,</blockquote>
	    <blockquote class='fragment fade-in'>se abandona</blockquote>
	    <h1>Gabriel Garc√≠a M√°rquez</h1>
	    <aside class='notes'>Sacado de <a href='https://cofradiadeescritoresdepuertorico.wordpress.com/2014/11/06/escribir-es-reescribir/'>aqu√≠</a></aside>
	  </section>

	  <section data-background='https://live.staticflickr.com/4362/37027507200_7cb800e699_k_d.jpg'><h1>Software libre + libro libre = proceso continuo de cultura abierta.</h1></section>
	  
	  <section><blockquote>La industria convirti√≥ a libros y escritores en objetos de mercado.</blockquote>
	    <h1>Laura Esquivel</h1>
	    <aside class='notes'>Extra√≠do de <a href='https://fabiosa.es/las-15-frases-mas-memorables-de-laura-esquivel/'>este conjunto de citas.</a>. Con un sistema de integraci√≥n/despliegue continuo aplicado a un libro, es muy f√°cil sacar nuevas ediciones, incorporar cambios de otras personas, e incluso sacar varias versiones (forks) de un libro. Algunas propias, otras ajenas. De forma totalmente gratuita y, por supuesto, libre.
	    </aside>
	  </section>

	  <section data-background='https://live.staticflickr.com/1884/43203793545_015e562716_k_d.jpg'><h3>No abandonemos nuestros libros</h3>
	    <h2 class='fragment'>Liberemos la escritura</h2>
	    <h1 class='fragment'>Usando herramientas y licencias libres.</h1>
	  </section>

	</section>
		  <section data-background='https://live.staticflickr.com/2889/9112258042_c000ad70c8_k_d.jpg'>
	    <h1>Muchas gracias</h1>
	  </section>
      </div>

      </div>
    </div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
			    hash: true,
			    width: "99%",
			    history: true,
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
